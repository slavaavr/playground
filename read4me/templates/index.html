<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Read4Me</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
{% block content %}
<img src="{{image_url}}" alt="img" onclick="sentences()">
<script>
  window.Telegram.WebApp.expand();

  function sentences() {
    let id = window.Telegram.WebApp.initDataUnsafe?.user?.id.toString();
    if (id === undefined) {
      id = "42";
    }

    fetch("{{auth_url}}", {
      method: "POST", // *GET, POST, PUT, DELETE, etc.
      mode: "cors", // no-cors, *cors, same-origin
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({"tg_id": id}),
    }).then(resp => {
      if (resp.redirected) {
        location.replace(resp.url);
      }
    });
  }
</script>
{% endblock %}
</body>
</html>